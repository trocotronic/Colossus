## $Id: Makefile.in,v 1.11 2007-02-03 13:26:00 Trocotronic Exp $

INCLUDES = ../include/ircd.h ../include/ircsprintf.h ../include/md5.h \
	../include/modulos.h ../include/parseconf.h \
	../include/sql.h ../include/struct.h
R_MODULES=mysql.so postgresql.so sqlite.so
COMMANDS=mysql.o postgresql.o sqlite.o
MODULES=$(R_MODULES)
MODULEFLAGS=@MODULEFLAGS@
all: build
build: $(MODULES)
custommodule: $(MODULEFILE).c
	$(CC) $(CFLAGS) $(MODULEFLAGS) -DENLACE_DINAMICO -o $(MODULEFILE).so $(MODULEFILE).c 
mysql.so: mysql.c $(INCLUDES) mysql.o
	$(CC) $(CFLAGS) $(MODULEFLAGS) -DENLACE_DINAMICO @MYSQLHEAD@ @MYSQLLIBS@ -o mysql.so mysql.c
mysql.o: mysql.c $(INCLUDES)
	$(CC) $(CFLAGS) $(MODULEFLAGS) @MYSQLHEAD@ -c mysql.c
postgresql.so: postgresql.c $(INCLUDES) postgresql.o
	$(CC) $(CFLAGS) $(MODULEFLAGS) -DENLACE_DINAMICO @POSTGREHEAD@ @POSTGRELIBS@ -o postgresql.so postgresql.c
postgresql.o: postgresql.c $(INCLUDES)
	$(CC) $(CFLAGS) $(MODULEFLAGS) @POSTGREHEAD@ -c postgresql.c
sqlite.so: sqlite.c $(INCLUDES) sqlite.o
	$(CC) $(CFLAGS) $(MODULEFLAGS) -DENLACE_DINAMICO -lsqlite3 -o sqlite.so sqlite.c
sqlite.o: sqlite.c $(INCLUDES)
	$(CC) $(CFLAGS) $(MODULEFLAGS) -lsqlite3 -c sqlite.c
clean:
	$(RM) -f *.o *.so *~ core
